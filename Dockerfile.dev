FROM node:12.14.1 as build
WORKDIR /tmp
COPY package.json package-lock.json ./
RUN npm install

FROM node:12.14.1-slim
ENV NODE_PATH=/tmp/node_modules
COPY --from=build /tmp/node_modules ${NODE_PATH}
ENV PATH="${NODE_PATH}/.bin:${PATH}"
ENTRYPOINT ["ts-node-dev", "--transpile-only"]
WORKDIR /opt/pong-dev
EXPOSE 3000
